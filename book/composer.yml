---
- hosts: all
  tasks:
    - shell: curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer
      become: yes
      ignore_errors: yes

  - command: composer self-update
    become: yes

  - lineinfile:
      state: present
      dest: ~/.bashrc
      regexp: '.composer/vendor/bin'
      line: 'export PATH="$PATH:$HOME/.composer/vendor/bin"'

  - command: composer global require "squizlabs/php_codesniffer=*"
    ignore_errors: yes
